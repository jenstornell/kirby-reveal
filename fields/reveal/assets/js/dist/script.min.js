var rvlAction=function(){var t={};return t.init=function(){$(".topbar").append('<div class="rvl-action"><i class="fa fa-toggle-off"></i></div>'),null!==localStorage.getItem("rvl-active")&&rvlAction.setActive(),$(".rvl-action").click(function(t){t.preventDefault(),$(".bars").hasClass("rvl-active")?rvlAction.setInactive():rvlAction.setActive(),$(window).trigger("resize"),$("body").disableSelection()})},t.setActive=function(){$(".bars").addClass("rvl-active"),$(".rvl-action").html('<i class="fa fa-toggle-on"></i>'),localStorage.setItem("rvl-active","1")},t.setInactive=function(){$(".bars").removeClass("rvl-active"),$(".rvl-action").html('<i class="fa fa-toggle-off"></i>'),localStorage.removeItem("rvl-active")},t}(),rvlMessage=function(){var t={};return t.activate=function(){console.log("asd"),$(".rvl-notify").css("top",0),setTimeout(function(){$(".rvl-notify").stop().animate({top:-24},{duration:500})},2e3)},t}();!function(t){t.fn.reveal=function(){return this.each(function(){var e=t(this);if(e.data("reveal"))return!0;e.data("reveal",!0),rvlAction.init(),rvlTrigger.init(e),rvlScroll.init(null)})}}(jQuery);var rvlScroll=function(){var t={},e=null;return t.init=function(r,l){e=l,t.onLoad()},t.gotoScroll=function(){null!==localStorage.getItem("rvl-scroll")&&$(".rvl-iframe iframe").contents().scrollTop(parseInt(localStorage.getItem("rvl-scroll")))},t.onScroll=function(){$(".rvl-iframe iframe").contents().scroll(function(){t.clearScrollTimer(),t.setScrollTimer()})},t.clearScrollTimer=function(){e&&(clearTimeout(e),e=null)},t.setScrollTimer=function(){e=setTimeout(function(){t.setScroll()},2e3)},t.setScroll=function(){localStorage.setItem("rvl-scroll",t.getScroll())},t.getScroll=function(){return $(".rvl-iframe iframe:last-child").contents().scrollTop()},t.onLoad=function(){$(".rvl-iframe iframe").load(function(){t.gotoScroll(),t.onScroll(),$(this).unbind()})},t}(),rvlTrigger=function(){var t={},e=0,r=null,l=0;return t.init=function(t){l=t.data("refresh"),rvlTrigger.events()},t.events=function(){$(".field input, .field textarea").first().blur(function(e){t.cases()}),$('.field-content input[type="checkbox"], .field-content input[type="radio"]').click(function(e){t.trigger()}),$(".field-content select").change(function(e){t.trigger()}),$(".field-content input, .field-content textarea").on("input propertychange",function(){t.trigger(),$(this).focus()})},t.trigger=function(){$(".field-content input, .field-content textarea").trigger("blur")},t.cases=function(){r&&(clearTimeout(r),r=null),e>$.now()?r=setTimeout(function(){console.log("TIMEOUT trigger"),t.cases()},l):(e=$.now()+l,t.refresh())},t.refresh=function(){rvlScroll.setScroll(),rvlTrigger.reloadIframe()},t.reloadIframe=function(){var t=$(".rvl-iframe iframe:last-child").attr("src"),e=$(".rvl-iframe iframe:last-child").contents().scrollTop();$(".rvl-iframe iframe:first-child").attr("src",t).load(function(){$(".rvl-iframe iframe:first-child").before($(".rvl-iframe iframe:last-child")),$(".rvl-iframe iframe").contents().scrollTop(e),rvlScroll.onScroll(),rvlMessage.activate(),$(this).unbind()})},t}();